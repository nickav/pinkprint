#!/usr/bin/env node

const program = require('commander')
const package = require('../package')
const lib = require('../lib')

program
  .version(package.version)
  .description(package.description)
  .usage('<command> [options]')

program
  .command('init')
  .alias('i')
  .description('Creates a new blueprint directory')
  .action(() => lib.init())

program
  .command('generate <template> <name>')
  .alias('g')
  .description('Creates static files from a blueprint')
  .action((template, name) => lib.generate(template, name))

program.parse(process.argv)

if (!program.args.length) {
  program.outputHelp()
} else {
  // error on invalid commands
  let command = program.args[program.args.length - 1]
  if (typeof command !== 'object') {
    let me = 'blue'
    console.log(
      `${me}: '${command}' is not a valid ${me} command. See '${me} --help'`
    )
  }
}

